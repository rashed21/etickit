<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    
    
    <ui:composition template="/Theme/newTemplate.xhtml">
       
        <ui:define name="top">
            <ui:include src="link.xhtml"></ui:include>           
        </ui:define>
        
        <ui:define name="content">
            <h:form>
         
                  
                
                
               <h:panelGrid columns="2">
            <h:outputLabel value="Depart From :" />
               <p:inputText value="#{busTimeScheduleControl.busTimeSchedule.departFrom}"/>
               
              <h:outputLabel value="Total Seat :" />  
              <p:inputText id="surname" value="#{busTimeScheduleControl.busTimeSchedule.totSeatNo}">
                  <p:ajax event="blur" listener="#{busTimeScheduleControl.test()}" update="seat"/>
        </p:inputText>
               
              <h:outputLabel value="Arrival To :" /> 
               <p:inputText value="#{busTimeScheduleControl.busTimeSchedule.arriveTo}"/>
               <h:outputLabel value="Depart Time  :" />     
               <p:calendar  value="#{busTimeScheduleControl.busTimeSchedule.deptTime}" pattern="HH:mm a" timeOnly="true"  />
                <h:outputLabel value="Arrival Time  :" />     
                <p:calendar  value="#{busTimeScheduleControl.busTimeSchedule.arrivTime}" pattern="HH:mm a" timeOnly="true"  />
           
            </h:panelGrid>
                
              
                <h:panelGrid columns="5" cellpadding="5">
        <h:outputLabel  value="Available Seats" />
        <p:selectCheckboxMenu id="seat" value="#{busTimeScheduleControl.selectedSeats}" label="Seats"
                              filter="true" filterMatchMode="startsWith" panelStyle="width:250px">
            <f:selectItems value="#{busTimeScheduleControl.seats}" />
        </p:selectCheckboxMenu>
        <p:commandLink value="Submit" update="display" />
    
 
    <p:outputPanel id="display" style="width:250px;padding-left:5px;margin-top:10px" >
        <p:dataList value="#{busTimeScheduleControl.selectedSeats}" var="city" emptyMessage="Seats"  >
            #{city}
        </p:dataList>
        
        <p:dataTable var="city" value="#{busTimeScheduleControl.totalSeatName}">
            
               <p:column headerText="">
                   <h:outputText value="#{city.first}" />
                 </p:column>

               <p:column headerText="">
                   <h:outputText value="#{city.second}" />
                 </p:column>
            
                <p:column headerText="">
                   <h:outputText value="" />
                 </p:column>
            
                <p:column headerText="">
                    <h:outputText value="#{city.third}" />
                 </p:column>
            <p:column headerText="">
                <h:outputText value="#{city.fourth}" />
                 </p:column>
            </p:dataTable> 
   
        
        
              <!--Checking with Sold Ticket-->  
              
              
              
              
              
              
              
              
              
              
              
              
              
        
        
              <p:dataTable var="city" value="#{busTimeScheduleControl.totalSeatWtihAlloted}">
            
               <p:column headerText="">
                   <h:outputText value="#{city.first}" />
                 </p:column>

               <p:column headerText="">
                   <h:outputText value="#{city.second}" />
                 </p:column>
            
                <p:column headerText="">
                   <h:outputText value="" />
                 </p:column>
            
                <p:column headerText="">
                    <h:outputText value="#{city.third}" />
                 </p:column>
            <p:column headerText="">
                <h:outputText value="#{city.fourth}" />
                 </p:column>
            </p:dataTable> 
    </p:outputPanel>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      </h:panelGrid>  
                   
                <h:panelGrid columns="2">
           <p:outputLabel value="Bus Type"></p:outputLabel>
           <p:selectOneMenu value="#{busTimeScheduleControl.busTimeSchedule.busType}" >
               <f:selectItems value="#{busTypeCRUD.getbusTypeInfoList()}"></f:selectItems>
                    </p:selectOneMenu>
           
           
           
            <p:outputLabel value="Bus Name"></p:outputLabel>
            <p:selectOneMenu value="#{busTimeScheduleControl.busTimeSchedule.busInfo}" >
                <f:selectItems value="#{busInfoBean.allBusInfoList}"></f:selectItems>
                    </p:selectOneMenu>
            <p:outputLabel value="Per Seat TK. :"/>
            <p:inputText value="#{busTimeScheduleControl.busTimeSchedule.value}"/>
  
            <h:commandButton value="Add Type" action="#{busTimeScheduleControl.insert()}"/>
            
            </h:panelGrid>
        
        </h:form>
        <h:form>

            <p:dataTable var="shedule" value="#{busTimeScheduleControl.allBusTimeShedule}">
                <p:column headerText="Arrival time">
                    <h:outputText value="#{shedule.arrivTime}" />
                </p:column>

               <p:column headerText="Arrive To">
                   <h:outputText value="#{shedule.arriveTo}" />
                </p:column>
                 <p:column headerText="Available Seat">
                     <h:outputText value="#{shedule.availableSeat}" />
                </p:column>
                 <p:column headerText="Bus Name">
                     <h:outputText value="#{shedule.busInfo}" />
                </p:column> 
                 <p:column headerText="Depart From">
                     <h:outputText value="#{shedule.departFrom}" />
                </p:column>
                 <p:column headerText="Bus Type">
                     <h:outputText value="#{shedule.bus_type_name}" />
                </p:column>
                 <p:column headerText="Depart Time">
                     <h:outputText value="#{shedule.deptTime}" />
                </p:column>
                
                <p:column headerText="Total Seat">
                    <h:outputText value="#{shedule.totSeatNo}" />
                </p:column>
 
                <p:column headerText="Delete">
                    <h:commandButton value="Delete" action="#{busTimeScheduleControl.delete(shedule.busTimeId)}" >
               
                    </h:commandButton>
                </p:column>

            </p:dataTable> 
        </h:form>        
        </ui:define>       
    </ui:composition>
</html>

